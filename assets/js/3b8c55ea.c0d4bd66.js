"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3217],{3905:(e,n,t)=>{t.r(n),t.d(n,{MDXContext:()=>m,MDXProvider:()=>c,mdx:()=>y,useMDXComponents:()=>d,withMDXComponents:()=>s});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(){return i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},i.apply(this,arguments)}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var m=a.createContext({}),s=function(e){return function(n){var t=d(n.components);return a.createElement(e,i({},n,{components:t}))}},d=function(e){var n=a.useContext(m),t=n;return e&&(t="function"==typeof e?e(n):p(p({},n),e)),t},c=function(e){var n=d(e.components);return a.createElement(m.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},h=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),s=d(t),c=r,h=s["".concat(o,".").concat(c)]||s[c]||u[c]||i;return t?a.createElement(h,p(p({ref:n},m),{},{components:t})):a.createElement(h,p({ref:n},m))}));function y(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=h;var p={};for(var l in n)hasOwnProperty.call(n,l)&&(p[l]=n[l]);p.originalType=e,p.mdxType="string"==typeof e?e:r,o[1]=p;for(var m=2;m<i;m++)o[m]=t[m];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}h.displayName="MDXCreateElement"},89803:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>p,metadata:()=>m,toc:()=>d});var a=t(83117),r=t(80102),i=(t(67294),t(3905)),o=["components"],p={id:"installation",title:"Installation",sidebar_label:"Installation"},l=void 0,m={unversionedId:"installation",id:"installation",title:"Installation",description:"We recommend that you use our binary distribution through pypi inside of a virtual environment, which supports both MacOs and Linux. On Windows we have successfully gotten pyre to work through WSL, but do not officially support it.",source:"@site/docs/installation.md",sourceDirName:".",slug:"/installation",permalink:"/docs/installation",draft:!1,editUrl:"https://github.com/facebook/pyre-check/tree/main/documentation/website/docs/installation.md",tags:[],version:"current",frontMatter:{id:"installation",title:"Installation",sidebar_label:"Installation"},sidebar:"pyre",previous:{title:"Getting Started",permalink:"/docs/getting-started"},next:{title:"Types in Python",permalink:"/docs/category/types-in-python"}},s={},d=[{value:"Binary Distribution",id:"binary-distribution",level:2},{value:"IDE Integration",id:"ide-integration",level:2},{value:"Building from Source",id:"building-from-source",level:2},{value:"Requirements",id:"requirements",level:3},{value:"Building the OCaml binary",id:"building-the-ocaml-binary",level:3},{value:"Testing changes to the Python Client",id:"testing-changes-to-the-python-client",level:3},{value:"Testing changes for Plugin Development",id:"testing-changes-for-plugin-development",level:4},{value:"Building from Docker",id:"building-from-docker",level:2},{value:"Windows Subsystem for Linux (WSL) Install",id:"windows-subsystem-for-linux-wsl-install",level:2}],c={toc:d};function u(e){var n=e.components,t=(0,r.Z)(e,o);return(0,i.mdx)("wrapper",(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,i.mdx)("p",null,"We recommend that you use our binary distribution through ",(0,i.mdx)("a",{parentName:"p",href:"https://pypi.org/"},"pypi")," inside of a virtual environment, which supports both ",(0,i.mdx)("em",{parentName:"p"},"MacOs")," and ",(0,i.mdx)("em",{parentName:"p"},"Linux"),". On ",(0,i.mdx)("em",{parentName:"p"},"Windows")," we have successfully gotten ",(0,i.mdx)("inlineCode",{parentName:"p"},"pyre")," to work through ",(0,i.mdx)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Windows_Subsystem_for_Linux"},"WSL"),", but do not officially support it."),(0,i.mdx)("h2",{id:"binary-distribution"},"Binary Distribution"),(0,i.mdx)("p",null,"You can get Pyre through ",(0,i.mdx)("a",{parentName:"p",href:"https://pypi.org/"},"pypi")," by running:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"$ (venv) $ pip install pyre-check\n")),(0,i.mdx)("p",null,"See our ",(0,i.mdx)("a",{parentName:"p",href:"/docs/getting-started"},"Getting Started")," section for a more detailed example, including setup for a virtual environment."),(0,i.mdx)("h2",{id:"ide-integration"},"IDE Integration"),(0,i.mdx)("p",null,"Pyre supports the ",(0,i.mdx)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Language_Server_Protocol"},"Language Server Protocol"),". We provide an ",(0,i.mdx)("a",{parentName:"p",href:"https://marketplace.visualstudio.com/items?itemName=fb-pyre-check.pyre-vscode"},"extension for ",(0,i.mdx)("em",{parentName:"a"},"VSCode"))," that will automatically try to connect to a running server. You can also directly interact with the LSP by piping the appropriate ",(0,i.mdx)("inlineCode",{parentName:"p"},"JSON")," into ",(0,i.mdx)("inlineCode",{parentName:"p"},"pyre persistent"),"."),(0,i.mdx)("h2",{id:"building-from-source"},"Building from Source"),(0,i.mdx)("p",null,"These instructions are known to work on ",(0,i.mdx)("em",{parentName:"p"},"Mac OS X")," (tested on ",(0,i.mdx)("em",{parentName:"p"},"High\nSierra")," through ",(0,i.mdx)("em",{parentName:"p"},"OSX 10.13")," - even though binaries are compatible with versions\nas old as ",(0,i.mdx)("em",{parentName:"p"},"10.11"),") and ",(0,i.mdx)("em",{parentName:"p"},"Linux")," (tested on ",(0,i.mdx)("em",{parentName:"p"},"Ubuntu 16.04 LTS")," and ",(0,i.mdx)("em",{parentName:"p"},"CentOS 7"),")."),(0,i.mdx)("h3",{id:"requirements"},"Requirements"),(0,i.mdx)("p",null,"In addition to ",(0,i.mdx)("a",{parentName:"p",href:"/docs/getting-started#requirements"},"Python and watchman"),", we need a working ",(0,i.mdx)("em",{parentName:"p"},"OCaml")," compiler. We use\n",(0,i.mdx)("a",{parentName:"p",href:"https://opam.ocaml.org/"},"Opam")," to manage our compiler and libraries. You can get Opam via various\npackage management systems. Please follow their instructions for your particular operating system."),(0,i.mdx)("h3",{id:"building-the-ocaml-binary"},"Building the OCaml binary"),(0,i.mdx)("p",null,"First, clone the repository from ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/facebook/pyre-check"},"GitHub")," using:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"$ git clone https://github.com/facebook/pyre-check\n")),(0,i.mdx)("p",null,"You can complete the setup of your development environment with:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"$ cd pyre-check\n$ ./scripts/setup.sh --local\n")),(0,i.mdx)("p",null,"This will compile Pyre and run all the unit tests. This is likely going to take some time on your system."),(0,i.mdx)("p",null,"You can now make changes to the code. Run the following commands to compile and test your changes:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"$ cd source\n$ make\n$ make test\n")),(0,i.mdx)("h3",{id:"testing-changes-to-the-python-client"},"Testing changes to the Python Client"),(0,i.mdx)("p",null,"In a virtualenv, install dependencies with ",(0,i.mdx)("inlineCode",{parentName:"p"},"requirements.txt")," and run python tests to make sure everything is set up correctly"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"$ cd /path/to/pyre-check\n$ pip install -r requirements.txt\n$ ./scripts/run-python-tests.sh\n")),(0,i.mdx)("p",null,"When installing and running ",(0,i.mdx)("inlineCode",{parentName:"p"},"pyre")," from PyPi, the entry point to the executable is actually ",(0,i.mdx)("inlineCode",{parentName:"p"},"client/pyre.py"),". To be able to run this file from anywhere, add the directory containing the ",(0,i.mdx)("inlineCode",{parentName:"p"},"pyre-check")," directory to the ",(0,i.mdx)("inlineCode",{parentName:"p"},"PYTHONPATH")," environment variable and subsequently assign ",(0,i.mdx)("inlineCode",{parentName:"p"},"pyre")," as an alias for ",(0,i.mdx)("inlineCode",{parentName:"p"},"pyre-check.client.pyre"),". For the ",(0,i.mdx)("inlineCode",{parentName:"p"},"pyre")," command to correctly point to the compiled binary, also set the environment variable ",(0,i.mdx)("inlineCode",{parentName:"p"},"PYRE_BINARY")," to ",(0,i.mdx)("inlineCode",{parentName:"p"},"source/build/default/main.exe"),"."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},'$ echo "alias pyre=\'PYTHONPATH=\\"/path/to/pyre-check/..:\\$PYTHONPATH\\" python -m pyre-check.client.pyre\'" >> ~/.bashrc\n$ echo "export PYRE_BINARY=/path/to/pyre-check/source/_build/default/main.exe" >> ~/.bashrc\n$ source ~/.bashrc\n')),(0,i.mdx)("p",null,"You should be able to open a new shell and run ",(0,i.mdx)("inlineCode",{parentName:"p"},"pyre -h")," now, confirming ",(0,i.mdx)("inlineCode",{parentName:"p"},"pyre")," was set-up correctly. Any changes made to the Pyre Python client code should be immediately observable the next time you invoke ",(0,i.mdx)("inlineCode",{parentName:"p"},"pyre")),(0,i.mdx)("h4",{id:"testing-changes-for-plugin-development"},"Testing changes for Plugin Development"),(0,i.mdx)("p",null,"VSCode will not pick up your shell aliases, so the alias step in the previous section will not work if you're doing VSCode Plugin development. To get around this, instead of creating an alias, we can create an executable script called ",(0,i.mdx)("inlineCode",{parentName:"p"},"pyre")," and place it in a directory in our ",(0,i.mdx)("inlineCode",{parentName:"p"},"PATH"),":"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},'#!/bin/bash\nPYTHONPATH="/path/to/pyre-check/..:$PYTHONPATH" python -m pyre-check.client.pyre "$@"\n')),(0,i.mdx)("p",null,"Add the ",(0,i.mdx)("inlineCode",{parentName:"p"},"pyre-check/scripts")," directory to ",(0,i.mdx)("inlineCode",{parentName:"p"},"PATH")," (assuming you placed the above script in that directory) and then use the command ",(0,i.mdx)("inlineCode",{parentName:"p"},"pyre")," to launch the client like before"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"$ echo 'PATH=\"/path/to/pyre-check/scripts:$PATH\"' >> ~/.bashrc\n$ source ~/.bashrc\n")),(0,i.mdx)("h2",{id:"building-from-docker"},"Building from Docker"),(0,i.mdx)("p",null,"If you're having issues setting up or your OS is not yet supported, you can also use a Docker image. It runs ",(0,i.mdx)("a",{parentName:"p",href:"https://www.debian.org/"},"Debian GNU/Linux 10 (buster)")," and builds pyre-check from source."),(0,i.mdx)("p",null,"Before starting, ensure that ",(0,i.mdx)("a",{parentName:"p",href:"https://docs.docker.com/get-docker/"},"Docker")," is installed on your computer."),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Clone the pyre-check repository and navigate to the root directory."),(0,i.mdx)("pre",{parentName:"li"},(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/facebook/pyre-check.git\ncd pyre-check\n"))),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Build the Docker image with the tag ",(0,i.mdx)("inlineCode",{parentName:"p"},"pyre-check")," (or another tag if you wish)"),(0,i.mdx)("pre",{parentName:"li"},(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"docker build -t pyre-docker .\n"))),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Run the new image in a new container ",(0,i.mdx)("inlineCode",{parentName:"p"},"pyre-container")," (or another name if you wish)"),(0,i.mdx)("pre",{parentName:"li"},(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"docker run \\\n--name pyre-container \\\n-v /path/to/your/directory:/src \\\n-t -i \\\npyre-check\n")),(0,i.mdx)("p",{parentName:"li"},(0,i.mdx)("em",{parentName:"p"},"Note: Launching the container will build and run all tests."))),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Inside the container, run any Pyre command now with ",(0,i.mdx)("inlineCode",{parentName:"p"},"pyre"),"!"),(0,i.mdx)("p",{parentName:"li"},(0,i.mdx)("em",{parentName:"p"},"Note: When initializing Pyre with ",(0,i.mdx)("inlineCode",{parentName:"em"},"pyre init"),", you may have to enter the following paths for the binary and typeshed:")),(0,i.mdx)("pre",{parentName:"li"},(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"\u019b No `pyre.bin` found, enter the path manually: /home/opam/pyre-check/source/_build/default/main.exe\n\u019b Unable to locate typeshed, please enter its root: /home/opam/pyre-check/stubs/typeshed/typeshed-master\n")))),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"For contributors:")," Inside the Docker container, the added pyre-check directory is only editable by the root user. To contribute to Pyre, make edits in your local filesystem and rebuild the Docker by running Step 2, then running a new Docker container in Steps 3-4."),(0,i.mdx)("h2",{id:"windows-subsystem-for-linux-wsl-install"},"Windows Subsystem for Linux (WSL) Install"),(0,i.mdx)("p",null,"On ",(0,i.mdx)("em",{parentName:"p"},"x86_64")," Windows ",(0,i.mdx)("inlineCode",{parentName:"p"},"pyre")," can run via ",(0,i.mdx)("em",{parentName:"p"},"Linux")," using ",(0,i.mdx)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Windows_Subsystem_for_Linux"},"WSL"),".\nA brief summary to get this running on ",(0,i.mdx)("em",{parentName:"p"},"Ubuntu")," please follow:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/windows/wsl/install-win10"},"Install WSL")," ",(0,i.mdx)("em",{parentName:"li"},"(external Microsoft Documentation)")),(0,i.mdx)("li",{parentName:"ul"},"Once you have a login to your Linux of choice:",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Optionally: Install build environment (some dependencies of ",(0,i.mdx)("inlineCode",{parentName:"li"},"pyre")," might need to be built)"),(0,i.mdx)("li",{parentName:"ul"},"Use ",(0,i.mdx)("inlineCode",{parentName:"li"},"pip")," as described above or via a ",(0,i.mdx)("a",{parentName:"li",href:"https://docs.python.org/3/tutorial/venv.html"},"Python Virtual Environment")))),(0,i.mdx)("li",{parentName:"ul"},"Here is an example using ",(0,i.mdx)("a",{parentName:"li",href:"https://www.ubuntu.com/"},"Ubuntu")," with a ",(0,i.mdx)("a",{parentName:"li",href:"https://docs.python.org/3/tutorial/venv.html"},"venv"),":")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"$ sudo apt install python3-venv build-essential python3-dev libpython3-dev\n$ python3 -m venv /tmp/tp\n$ /tmp/tp/bin/pip install --upgrade pip setuptools wheel\n$ /tmp/tp/bin/pip install pyre-check\n$ source /tmp/tp/bin/activate\n$ cd /mnt/c/path/to/repo\n$ pyre --source-directory . check\n\n$ (tp) cooper@TESTFAC-1FMHLI2:/mnt/c/path/to/repo$ pyre --source-directory . check\n \u019b Setting up a `.pyre_configuration` with `pyre init` may reduce overhead.\n \u019b No type errors found\n")))}u.isMDXComponent=!0}}]);