<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.69">
<script src="https://buttons.github.io/buttons.js"></script><title data-react-helmet="true">Types in Python | Pyre</title><meta data-react-helmet="true" property="og:image" content="https://pyre-check.org/img/docusaurus.png"><meta data-react-helmet="true" property="twitter:image" content="https://pyre-check.org/img/docusaurus.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Pyre"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Types in Python | Pyre"><meta data-react-helmet="true" name="description" content="Python&#x27;s type system was specified in PEP 484. If you are new to Python&#x27;s type system and want to learn the basics, we highly recommend you take a look at mypy&#x27;s cheatsheet as well as their type system reference. The following discussion focuses on Pyre&#x27;s approach to &quot;gradual typing&quot; and how you can get from an untyped codebase to a fully typed codebase."><meta data-react-helmet="true" property="og:description" content="Python&#x27;s type system was specified in PEP 484. If you are new to Python&#x27;s type system and want to learn the basics, we highly recommend you take a look at mypy&#x27;s cheatsheet as well as their type system reference. The following discussion focuses on Pyre&#x27;s approach to &quot;gradual typing&quot; and how you can get from an untyped codebase to a fully typed codebase."><meta data-react-helmet="true" property="og:url" content="https://pyre-check.org/docs/types-in-python"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://pyre-check.org/docs/types-in-python"><link rel="stylesheet" href="/styles.16ee35fa.css">
<link rel="preload" href="/styles.d2eea326.js" as="script">
<link rel="preload" href="/runtime~main.4264d4d3.js" as="script">
<link rel="preload" href="/main.7c79148d.js" as="script">
<link rel="preload" href="/1.a3b9a5d6.js" as="script">
<link rel="preload" href="/23.52ab2265.js" as="script">
<link rel="preload" href="/24.6bc0bd3c.js" as="script">
<link rel="preload" href="/935f2afb.4eed6a49.js" as="script">
<link rel="preload" href="/22.78cd7b85.js" as="script">
<link rel="preload" href="/81cd7d1e.30ac2a8a.js" as="script">
</head>
<body>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/integrated_logo_light.png" alt="Pyre Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/img/integrated_logo_light.png" alt="Pyre Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">Documentation</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/getting-started">Type Checking (Pyre)</a></li><li><a class="dropdown__link" href="/docs/pysa-basics">Static Analysis (Pysa)</a></li></ul></div><a class="navbar__item navbar__link"></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/pyre-check" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/integrated_logo_light.png" alt="Pyre Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/img/integrated_logo_light.png" alt="Pyre Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Documentation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">Type Checking (Pyre)</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/pysa-basics">Static Analysis (Pysa)</a></li></ul></li><li class="menu__list-item"><a class="menu__link"></a></li><li class="menu__list-item"><a href="https://github.com/facebook/pyre-check" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive thin-scrollbar menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration">Configuration</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/docs/types-in-python">Types in Python</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/errors">Errors</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/querying-pyre">Querying Pyre</a></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_39qw"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Types in Python</h1></header><div class="markdown"><p>Python&#x27;s type system was specified in <a href="https://www.python.org/dev/peps/pep-0484/" target="_blank" rel="noopener noreferrer">PEP 484</a>. If you are new to Python&#x27;s type system and want to learn the basics, we highly recommend you take a look at <a href="https://mypy.readthedocs.io/en/stable/cheat_sheet_py3.html" target="_blank" rel="noopener noreferrer">mypy&#x27;s cheatsheet</a> as well as their <a href="https://mypy.readthedocs.io/en/stable/builtin_types.html" target="_blank" rel="noopener noreferrer">type system reference</a>. The following discussion focuses on Pyre&#x27;s approach to &quot;gradual typing&quot; and how you can get from an untyped codebase to a fully typed codebase.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="gradual-typing"></a>Gradual Typing<a class="hash-link" href="#gradual-typing" title="Direct link to heading">#</a></h2><p>Most Python code does not (yet) start out typed. PEP 484 specifies a <a href="https://en.wikipedia.org/wiki/Gradual_typing" target="_blank" rel="noopener noreferrer">gradual type system</a>, which is built to allow you to <em>gradually</em> add annotations over time. It does so by</p><ul><li>only reporting errors on functions that have an explicit return type annotation,</li><li>introducing an escape hatch: a special type <code>Any</code> that has all possible attributes and is both sub- and super-type of any other type,</li><li>and assuming that all untyped fuctions implicitly return <code>Any</code>.</li></ul><p>For example,</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-python codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> typing </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> List</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">unannotated</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># implictly returns `Any`</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">b&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token plain">       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># function body is not checked</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">annotated</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> List</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># explicit return annotation means we type check `annotated`</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token builtin" style="color:rgb(130, 170, 255)">any</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> unannotated</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token builtin" style="color:rgb(130, 170, 255)">any</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">attribute         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># `Any` has all possible attributes</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">              </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Error: returning `int` but expecting `List`</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>In combination, these rules allow you to slowly annotate code without getting overwhelmed by type errors in one sitting. Incrementally adding more annotations will give you stronger safety and consistency guarantees in your codebase.</p><p>In the example above, if you changed <code>unannotated</code> to return <code>str</code>, you would get a type error when accessing the attribute <code>any.attribute</code> in <code>annotated</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="strict-mode"></a>Strict Mode<a class="hash-link" href="#strict-mode" title="Direct link to heading">#</a></h2><p>While <code>Any</code> is a necessary escape hatch when annotating large codebases over time, it can hide legitimate type errors. We&#x27;ve introduced <em>strict mode</em> in Pyre to address this problem. Strict mode can be toggled at a module level by introducing a <code># pyre-strict</code> comment to the file. In strict mode, Pyre will</p><ul><li>run on all functions, whether they are annotated or not,</li><li>error on functions, globals, or attributes that are missing annotations,</li><li>and error on annotations containing <code>Any</code> (with some exceptions to accomodate for common patterns).</li></ul><p>In our previous example,</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-python codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># pyre-strict</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> typing </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> List</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">unannotated</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Error: missing return annotation</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">b&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token plain">       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Error: function body *is* checked</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">annotated</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> List</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Error: implicit `Any` for generic parameter to `List`</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token builtin" style="color:rgb(130, 170, 255)">any</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> unannotated</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token builtin" style="color:rgb(130, 170, 255)">any</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">attribute         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Note: the type of `any` is still any.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">              </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Error: returning `int` but expecting `List`</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>As you can see in the example, <code>Any</code> can still sneak into modules that are strict, but increasing strict coverage and fixing the surfaced errors will gradually eliminate them.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="strict-by-default"></a>Strict-By-Default<a class="hash-link" href="#strict-by-default" title="Direct link to heading">#</a></h3><p>Strict mode can also be set as the default in a <a href="/docs/configuration">project configuration</a>. To opt individual files out of strict mode, use <code># pyre-unsafe</code> in place of <code># pyre-strict</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="when-source-code-is-not-available"></a>When Source Code is not Available<a class="hash-link" href="#when-source-code-is-not-available" title="Direct link to heading">#</a></h2><p>We do not always have access to all the source code that contributes type information to our project: e.g. <code>builtins</code> is compiled native code, and other libraries may be using <em>cython</em>. Other times, we may be working with Python code that is just too dynamic to be reasonably typed.</p><p>To address these cases, Pyre will give precedence to type <em>stub files</em> with a <code>*.pyi</code> extension over source files when these are specified in the search path in the <a href="/docs/configuration">project configuration</a> or if they are located next to the implementation file.
Stub files have the same structure as implementation files but only contain class and function signatures:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-python codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># my_dynamic_module.pyi</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">dynamic_function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Function body is omitted</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>If a <code>__getattr__</code> function is defined in the stub file as follows, Pyre will take it as a signal that the stub file is partially complete: accessing attributes whose name is not defined in the stub file will result in <code>Any</code> instead of a type error.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-python codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># my_stub.pyi</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> typing </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> Any</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Parameter needs to be typed as `str` and return type needs to be `Any`</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">__getattr__</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Any</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># my_source.py</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> my_stub</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">reveal_type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">my_stub</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Reveals `int`</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">reveal_type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">my_stub</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">undefined</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Reveals `Any`</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="strategies-for-increasing-coverage"></a>Strategies for Increasing Coverage<a class="hash-link" href="#strategies-for-increasing-coverage" title="Direct link to heading">#</a></h2><p>Pyre comes with tooling to make it easy to increase type coverage in your project.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="upgrade"></a>Upgrade<a class="hash-link" href="#upgrade" title="Direct link to heading">#</a></h3><p>When upgrading the type checker, new errors inevitably get surfaced. In order to keep a codebase clean through upgrades we&#x27;ve built <code>pyre-upgrade</code>, which automatically <a href="/docs/errors#suppression">suppresses</a> newly surfaced type errors. It takes Pyre&#x27;s output and adds supression comments to the code explaining what&#x27;s wrong so that developers can easily address the issues individually.</p><p>You can run <code>pyre-upgrade</code> with</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">venv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> $ pyre --output</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">json </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> pyre-upgrade fixme</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="automatic-type-inference"></a>Automatic Type Inference<a class="hash-link" href="#automatic-type-inference" title="Direct link to heading">#</a></h3><p>We have found tools that automatically add type annotations to code useful to get started with a project. There are two general approaches to automatic type inference: static inference and dynamic inference from runtime information. Both approaches come with their own trade-offs and we have found a combination of the two to be useful.</p><p>Pyre can do static type inference. You can run</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">venv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> $ pyre infer -i </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">directory or path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>to automatically apply annotations.</p><p>For dynamic inference we recommend you give <a href="https://github.com/Instagram/MonkeyType" target="_blank" rel="noopener noreferrer">MonkeyType</a> a try.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/pyre-check/tree/master/documentation/website/docs/gradual_typing.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/configuration"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Configuration</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/errors"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Errors »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_ thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#gradual-typing" class="table-of-contents__link">Gradual Typing</a></li><li><a href="#strict-mode" class="table-of-contents__link">Strict Mode</a><ul><li><a href="#strict-by-default" class="table-of-contents__link">Strict-By-Default</a></li></ul></li><li><a href="#when-source-code-is-not-available" class="table-of-contents__link">When Source Code is not Available</a></li><li><a href="#strategies-for-increasing-coverage" class="table-of-contents__link">Strategies for Increasing Coverage</a><ul><li><a href="#upgrade" class="table-of-contents__link">Upgrade</a></li><li><a href="#automatic-type-inference" class="table-of-contents__link">Automatic Type Inference</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Privacy</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Terms</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_1zJy"><img class="footer__logo" alt="Facebook Open Source Logo" src="https://docusaurus.io/img/oss_logo.png"></a></div><div>Copyright &#169; 2020 Facebook, Inc.</div></div></div></footer></div>
<script src="/styles.d2eea326.js"></script>
<script src="/runtime~main.4264d4d3.js"></script>
<script src="/main.7c79148d.js"></script>
<script src="/1.a3b9a5d6.js"></script>
<script src="/23.52ab2265.js"></script>
<script src="/24.6bc0bd3c.js"></script>
<script src="/935f2afb.4eed6a49.js"></script>
<script src="/22.78cd7b85.js"></script>
<script src="/81cd7d1e.30ac2a8a.js"></script>
</body>
</html>